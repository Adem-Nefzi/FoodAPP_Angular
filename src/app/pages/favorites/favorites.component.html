<!-- üçΩÔ∏è FAVORITES PAGE - MATCHING DASHBOARD DESIGN -->
<div
  class="min-h-screen flex bg-gray-50 dark:bg-gray-950 relative overflow-hidden"
>
  <!-- Enhanced animated background with food-themed visual effects -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Main gradient orbs -->
    <div
      class="absolute top-0 left-1/4 w-96 h-96 bg-gradient-to-br from-green-300/20 to-emerald-300/10 rounded-full blur-3xl animate-float-slow"
    ></div>
    <div
      class="absolute bottom-0 right-1/4 w-96 h-96 bg-gradient-to-tl from-orange-300/20 to-amber-300/10 rounded-full blur-3xl animate-float-slower"
      style="animation-delay: 2s"
    ></div>
    <div
      class="absolute top-1/2 right-0 w-80 h-80 bg-gradient-to-l from-red-300/15 to-pink-300/10 rounded-full blur-3xl animate-float-slow"
      style="animation-delay: 4s"
    ></div>

    <!-- Additional floating elements -->
    <div
      class="absolute top-10 left-10 w-64 h-64 bg-gradient-to-r from-purple-300/10 to-blue-300/5 rounded-full blur-2xl animate-float-slower"
      style="animation-delay: 1s"
    ></div>
    <div
      class="absolute bottom-20 left-1/3 w-72 h-72 bg-gradient-to-tr from-yellow-300/10 to-red-300/5 rounded-full blur-2xl animate-float-slow"
      style="animation-delay: 3s"
    ></div>

    <!-- Enhanced Animated grid pattern -->
    <div class="absolute inset-0 z-0">
      <div
        class="absolute inset-0 grid-pattern-enhanced opacity-[0.15] dark:opacity-[0.25]"
        style="
          background-image: linear-gradient(
              rgba(34, 197, 94, 0.5) 1px,
              transparent 1px
            ),
            linear-gradient(90deg, rgba(34, 197, 94, 0.5) 1px, transparent 1px);
          background-size: 50px 50px;
          background-position: 0 0;
          animation: gridFlow 20s linear infinite;
        "
      ></div>
    </div>

    <!-- Floating geometric shapes -->
    <div
      class="absolute top-32 right-32 w-24 h-24 border-2 border-green-300/30 dark:border-green-600/20 rounded-lg rotate-45 blur-sm animate-float"
    ></div>
    <div
      class="absolute bottom-40 left-20 w-16 h-16 border-2 border-orange-300/30 dark:border-orange-600/20 rounded-full blur-sm animate-float"
      style="animation-delay: 2s"
    ></div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 min-h-screen transition-all duration-300 relative z-10">
    <!-- Main Content Area -->
    <main class="p-4 lg:p-8">
      <!-- üîô Back Button -->
      <button
        (click)="goBack()"
        class="group mb-6 flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 hover:border-green-500/50 transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95"
      >
        <span
          nz-icon
          nzType="arrow-left"
          class="text-lg group-hover:-translate-x-1 transition-transform duration-300"
        ></span>
        <span
          class="font-semibold text-gray-700 dark:text-gray-300 group-hover:text-green-600 dark:group-hover:text-green-400"
          >Back to Dashboard</span
        >
      </button>

      <!-- Enhanced Page Header -->
      <div class="mb-8">
        <div class="flex-1">
          <!-- Enhanced heading with gradient text and icon -->
          <div class="flex items-center gap-3 mb-2">
            <div
              class="p-2.5 rounded-xl bg-gradient-to-br from-red-500/10 to-pink-500/10 dark:from-red-500/20 dark:to-pink-500/20 border border-red-500/20 dark:border-red-500/30"
            >
              <span
                nz-icon
                nzType="heart"
                nzTheme="fill"
                class="text-2xl text-red-600 dark:text-red-400"
              ></span>
            </div>
            <h1
              class="text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 via-red-700 to-pink-600 dark:from-white dark:via-red-300 dark:to-pink-300 bg-clip-text text-transparent animate-fade-in"
            >
              My Favorite Recipes
            </h1>
          </div>
          <p
            class="text-gray-600 dark:text-gray-400 font-medium flex items-center gap-2"
          >
            <span
              class="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"
            ></span>
            {{ favoriteRecipes().length }} recipes saved for later
          </p>
        </div>
      </div>

      <!-- Loading State -->
      <div
        *ngIf="isLoading()"
        class="flex items-center justify-center min-h-[400px]"
      >
        <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
      </div>

      <!-- Empty State -->
      <div
        *ngIf="!isLoading() && favoriteRecipes().length === 0"
        class="flex flex-col items-center justify-center min-h-[400px] text-center p-8"
      >
        <div class="text-8xl mb-6 opacity-50 animate-float">üíî</div>
        <h2
          class="text-3xl font-bold text-gray-900 dark:text-white mb-3 animate-fade-in"
        >
          No Favorite Recipes Yet
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-400 mb-8 max-w-md">
          Start exploring recipes and save your favorites by clicking the heart
          icon!
        </p>
        <button
          nz-button
          nzType="primary"
          nzSize="large"
          (click)="goBack()"
          class="px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300"
        >
          <span nz-icon nzType="fire"></span>
          <span>Explore Recipes</span>
        </button>
      </div>

      <!-- Recipes Grid -->
      <div
        *ngIf="!isLoading() && favoriteRecipes().length > 0"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in"
      >
        <div
          *ngFor="let recipe of favoriteRecipes()"
          class="group relative bg-white dark:bg-gray-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-800 hover:shadow-2xl hover:shadow-green-500/10 transition-all duration-300 cursor-pointer hover:-translate-y-2"
        >
          <!-- Recipe Image -->
          <div
            class="relative h-48 overflow-hidden"
            (click)="viewRecipe(recipe.id)"
          >
            <img
              *ngIf="recipe.imageUrl"
              [src]="recipe.imageUrl"
              [alt]="recipe.title"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
            />
            <div
              *ngIf="!recipe.imageUrl"
              class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 text-6xl"
            >
              üçΩÔ∏è
            </div>

            <!-- Remove Favorite Button -->
            <button
              nz-button
              nzType="text"
              nzSize="small"
              class="absolute top-3 right-3 p-2 rounded-full bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm hover:bg-red-500 hover:scale-110 transition-all duration-300 z-10 shadow-lg group/btn"
              (click)="removeFavorite(recipe.id); $event.stopPropagation()"
            >
              <span
                nz-icon
                nzType="heart"
                nzTheme="fill"
                class="text-red-500 group-hover/btn:text-white transition-colors duration-300"
              ></span>
            </button>

            <!-- Gradient overlay on hover -->
            <div
              class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            ></div>
          </div>

          <!-- Recipe Info -->
          <div class="p-4" (click)="viewRecipe(recipe.id)">
            <h3
              class="text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors duration-300"
            >
              {{ recipe.title }}
            </h3>

            <div
              class="flex items-center gap-3 mb-3 text-sm text-gray-600 dark:text-gray-400"
            >
              <span class="flex items-center gap-1">
                <span nz-icon nzType="clock-circle"></span>
                {{ recipe.prepTime }}min
              </span>
              <span class="flex items-center gap-1">
                <span nz-icon nzType="fire"></span>
                {{ recipe.difficulty }}
              </span>
            </div>

            <div class="flex items-center justify-between">
              <nz-tag [nzColor]="'green'" class="rounded-lg px-3 py-1 border-0">
                {{ recipe.category }}
              </nz-tag>
              <div
                class="flex items-center gap-1 text-yellow-500 font-semibold"
              >
                <span nz-icon nzType="star" nzTheme="fill"></span>
                <span>{{ recipe.averageRating || 0 }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
