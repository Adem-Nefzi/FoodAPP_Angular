<!-- ðŸ½ï¸ CLEAN & ELEGANT NAVBAR -->
<nav
  class="fixed top-0 left-0 right-0 z-50 theme-transition backdrop-blur-lg border-b"
  [ngClass]="
    isDarkMode
      ? 'bg-gray-900/90 border-gray-700/30'
      : 'bg-white/95 border-gray-200/30'
  "
>
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo & Brand -->
      <a
        routerLink="/"
        class="flex items-center space-x-3 group cursor-pointer no-underline"
      >
        <div
          class="w-10 h-10 rounded-xl flex items-center justify-center theme-transition group-hover:scale-105 shadow-md"
          [style.background]="
            'linear-gradient(135deg, ' +
            themeService.colors().primary +
            ', ' +
            themeService.colors().accent +
            ')'
          "
          [style.boxShadow]="
            '0 4px 20px ' + themeService.colors().primary + '30'
          "
        >
          <span
            nz-icon
            nzType="fire"
            nzTheme="fill"
            class="text-white text-lg"
          ></span>
        </div>

        <span
          class="font-display font-bold text-xl tracking-tight theme-transition"
          [ngClass]="isDarkMode ? 'text-white' : 'text-gray-900'"
        >
          Savoria
        </span>
      </a>

      <!-- Navigation Links - Clean Style (Only show when logged in) -->
      @if (isLoggedIn) {
      <div class="hidden md:flex items-center space-x-8">
        <a
          routerLink="/recipes"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="book"
              nzTheme="outline"
              class="text-base"
            ></span>
            <span>Recipes</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
            [style.background]="themeService.colors().primary"
          ></div>
        </a>

        <a
          routerLink="/collections"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="appstore"
              nzTheme="outline"
              class="text-base"
            ></span>
            <span>Collections</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
            [style.background]="themeService.colors().accent"
          ></div>
        </a>

        <a
          routerLink="/favorites"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="heart"
              nzTheme="fill"
              class="text-base"
            ></span>
            <span>Favorites</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 bg-red-400 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
          ></div>
        </a>
      </div>
      }

      <!-- Right Actions - Simplified -->
      <div class="flex items-center space-x-4">
        <!-- Theme Toggle -->
        <button
          nz-button
          nzType="text"
          nzShape="circle"
          [nzSize]="'large'"
          (click)="toggleTheme()"
          class="theme-transition hover:scale-105"
          [ngClass]="
            isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
          "
        >
          <span
            nz-icon
            [nzType]="isDarkMode ? 'sun' : 'moon'"
            nzTheme="fill"
            class="text-lg theme-transition"
            [style.color]="themeService.colors().primary"
          ></span>
        </button>

        <!-- Show Different Buttons Based on Auth State -->
        @if (!isLoggedIn) {
        <!-- Get Started Button (Not Logged In) -->
        <a
          routerLink="/login"
          nz-button
          nzType="primary"
          nzShape="round"
          [nzSize]="'default'"
          class="hidden md:flex items-center space-x-2 px-5 theme-transition hover:scale-105 shadow-md no-underline"
          [style.background]="
            'linear-gradient(135deg, ' +
            themeService.colors().primary +
            ', ' +
            themeService.colors().accent +
            ')'
          "
          [style.boxShadow]="
            '0 6px 20px ' + themeService.colors().primary + '30'
          "
          [style.border]="'none'"
        >
          <span nz-icon nzType="rocket" nzTheme="fill" class="text-sm"></span>
          <span class="font-medium text-sm">Get Started</span>
        </a>
        } @else {
        <!-- User Menu (Logged In) -->
        <div
          nz-dropdown
          [nzDropdownMenu]="userMenu"
          nzTrigger="click"
          nzPlacement="bottomRight"
          class="hidden md:block"
        >
          <button
            nz-button
            nzType="text"
            class="flex items-center space-x-2 px-3 py-2 rounded-lg theme-transition hover:scale-105"
            [ngClass]="
              isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
            "
          >
            <!-- User Avatar -->
            <nz-avatar
              [nzSize]="32"
              [nzSrc]="currentUser?.profilePicture || undefined"
              [nzIcon]="currentUser?.profilePicture ? undefined : 'user'"
              class="border-2"
              [style.background]="
                'linear-gradient(135deg, ' +
                themeService.colors().primary +
                ', ' +
                themeService.colors().accent +
                ')'
              "
            ></nz-avatar>

            <!-- Username -->
            <span
              class="text-sm font-medium"
              [ngClass]="isDarkMode ? 'text-gray-200' : 'text-gray-700'"
            >
              {{ currentUser?.username || "User" }}
            </span>

            <!-- Dropdown Icon -->
            <span
              nz-icon
              nzType="down"
              class="text-xs"
              [ngClass]="isDarkMode ? 'text-gray-400' : 'text-gray-500'"
            ></span>
          </button>
        </div>

        <!-- Dropdown Menu -->
        <nz-dropdown-menu #userMenu="nzDropdownMenu">
          <ul
            nz-menu
            class="rounded-xl overflow-hidden shadow-xl border backdrop-blur-sm min-w-[220px] py-2"
            [ngClass]="
              isDarkMode
                ? 'bg-gray-800/95 border-gray-700/50'
                : 'bg-white/95 border-gray-200/50'
            "
          >
            <!-- User Info Header -->
            <li
              nz-menu-item
              [nzDisabled]="true"
              class="!px-4 !py-3 border-b"
              [ngClass]="
                isDarkMode ? 'border-gray-700/50' : 'border-gray-200/50'
              "
            >
              <div class="flex items-center space-x-3">
                <nz-avatar
                  [nzSize]="40"
                  [nzSrc]="currentUser?.profilePicture || undefined"
                  [nzIcon]="currentUser?.profilePicture ? undefined : 'user'"
                  class="border-2"
                  [ngClass]="
                    isDarkMode ? 'border-amber-500/50' : 'border-amber-400/50'
                  "
                ></nz-avatar>
                <div class="flex-1 min-w-0">
                  <div
                    class="text-sm font-semibold truncate"
                    [ngClass]="
                      isDarkMode ? 'text-amber-900' : 'text-amber-900/80'
                    "
                  >
                    {{ currentUser?.username }}
                  </div>
                  <div
                    class="text-md truncate mt-1"
                    [ngClass]="
                      isDarkMode ? 'text-amber-800/80' : 'text-amber-600/80'
                    "
                  >
                    {{ currentUser?.email }}
                  </div>
                </div>
              </div>
            </li>

            <!-- Dashboard Link -->
            <li
              nz-menu-item
              routerLink="/dashboard"
              class="!px-4 !py-3 theme-transition hover:scale-[1.02]"
            >
              <span
                nz-icon
                nzType="dashboard"
                class="mr-3 text-amber-500"
              ></span>
              <span class="font-medium text-gray-600">My Kitchen</span>
            </li>

            <!-- Profile Link -->
            <li
              nz-menu-item
              routerLink="/profile"
              class="!px-4 !py-3 theme-transition hover:scale-[1.02]"
            >
              <span nz-icon nzType="user" class="mr-3 text-blue-500"></span>
              <span class="font-medium text-gray-600">My Profile</span>
            </li>

            <!-- Settings Link -->
            <li
              nz-menu-item
              routerLink="/settings"
              class="!px-4 !py-3 theme-transition hover:scale-[1.02]"
            >
              <span
                nz-icon
                nzType="setting"
                class="mr-3 text-purple-500"
              ></span>
              <span class="font-medium text-gray-600">Settings</span>
            </li>

            <!-- Divider -->
            <li
              nz-menu-divider
              class="!my-2"
              [ngClass]="isDarkMode ? '!bg-gray-700/50' : '!bg-gray-200/50'"
            ></li>

            <!-- Logout -->
            <li
              nz-menu-item
              (click)="logout()"
              class="!px-4 !py-3 theme-transition hover:scale-[1.02] group"
            >
              <span
                nz-icon
                nzType="logout"
                class="mr-3 text-red-500 group-hover:scale-110 theme-transition"
              ></span>
              <span
                class="font-medium text-red-500 group-hover:text-red-600 theme-transition"
                >Sign Out</span
              >
            </li>
          </ul>
        </nz-dropdown-menu>
        }

        <!-- Mobile Menu Button -->
        <button
          nz-button
          nzType="text"
          nzShape="circle"
          [nzSize]="'large'"
          class="md:hidden theme-transition"
          [ngClass]="
            isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
          "
        >
          <span
            nz-icon
            nzType="menu"
            nzTheme="outline"
            class="text-lg"
            [style.color]="isDarkMode ? '#F5F1E8' : '#2D2D2D'"
          ></span>
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Spacer for fixed navbar -->
<div class="h-16"></div>
