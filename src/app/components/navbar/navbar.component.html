<!-- ðŸ½ï¸ CLEAN & ELEGANT NAVBAR -->
<nav
  class="fixed top-0 left-0 right-0 z-50 theme-transition backdrop-blur-lg border-b"
  [ngClass]="
    isDarkMode
      ? 'bg-gray-900/90 border-gray-700/30'
      : 'bg-white/95 border-gray-200/30'
  "
>
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo & Brand -->
      <a
        routerLink="/"
        class="flex items-center space-x-3 group cursor-pointer no-underline"
      >
        <div
          class="w-10 h-10 rounded-xl flex items-center justify-center theme-transition group-hover:scale-105 shadow-md"
          [style.background]="
            'linear-gradient(135deg, ' +
            themeService.colors().primary +
            ', ' +
            themeService.colors().accent +
            ')'
          "
          [style.boxShadow]="
            '0 4px 20px ' + themeService.colors().primary + '30'
          "
        >
          <span
            nz-icon
            nzType="fire"
            nzTheme="fill"
            class="text-white text-lg"
          ></span>
        </div>

        <span
          class="font-display font-bold text-xl tracking-tight theme-transition"
          [ngClass]="isDarkMode ? 'text-white' : 'text-gray-900'"
        >
          Savoria
        </span>
      </a>

      <!-- Navigation Links - Clean Style (Only show when logged in) -->
      @if (isLoggedIn) {
      <div class="hidden md:flex items-center space-x-8">
        <a
          routerLink="/recipes"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="book"
              nzTheme="outline"
              class="text-base"
            ></span>
            <span>Recipes</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
            [style.background]="themeService.colors().primary"
          ></div>
        </a>

        <a
          routerLink="/collections"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="appstore"
              nzTheme="outline"
              class="text-base"
            ></span>
            <span>Collections</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
            [style.background]="themeService.colors().accent"
          ></div>
        </a>

        <a
          routerLink="/favorites"
          routerLinkActive="active-link"
          class="text-sm font-medium theme-transition group relative py-2 no-underline"
          [ngClass]="
            isDarkMode
              ? 'text-gray-300 hover:text-white'
              : 'text-gray-600 hover:text-gray-900'
          "
        >
          <span class="flex items-center space-x-2">
            <span
              nz-icon
              nzType="heart"
              nzTheme="fill"
              class="text-base"
            ></span>
            <span>Favorites</span>
          </span>
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 bg-red-400 rounded-full scale-x-0 group-hover:scale-x-100 theme-transition"
          ></div>
        </a>
      </div>
      }

      <!-- Right Actions - Simplified -->
      <div class="flex items-center space-x-4">
        <!-- Theme Toggle -->
        <button
          nz-button
          nzType="text"
          nzShape="circle"
          [nzSize]="'large'"
          (click)="toggleTheme()"
          class="theme-transition hover:scale-105"
          [ngClass]="
            isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
          "
        >
          <span
            nz-icon
            [nzType]="isDarkMode ? 'sun' : 'moon'"
            nzTheme="fill"
            class="text-lg theme-transition"
            [style.color]="themeService.colors().primary"
          ></span>
        </button>

        <!-- Show Different Buttons Based on Auth State -->
        @if (!isLoggedIn) {
        <!-- Get Started Button (Not Logged In) -->
        <a
          routerLink="/login"
          nz-button
          nzType="primary"
          nzShape="round"
          [nzSize]="'default'"
          class="hidden md:flex items-center space-x-2 px-5 theme-transition hover:scale-105 shadow-md no-underline"
          [style.background]="
            'linear-gradient(135deg, ' +
            themeService.colors().primary +
            ', ' +
            themeService.colors().accent +
            ')'
          "
          [style.boxShadow]="
            '0 6px 20px ' + themeService.colors().primary + '30'
          "
          [style.border]="'none'"
        >
          <span nz-icon nzType="rocket" nzTheme="fill" class="text-sm"></span>
          <span class="font-medium text-sm">Get Started</span>
        </a>
        } @else {
        <!-- User Menu (Logged In) -->
        <div
          nz-dropdown
          [nzDropdownMenu]="userMenu"
          nzTrigger="click"
          nzPlacement="bottomRight"
          class="hidden md:block"
        >
          <button
            nz-button
            nzType="text"
            class="flex items-center space-x-2 px-3 py-2 rounded-lg theme-transition hover:scale-105"
            [ngClass]="
              isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
            "
          >
            <!-- User Avatar -->
            <nz-avatar
              [nzSize]="32"
              [nzSrc]="currentUser?.profilePicture || undefined"
              [nzIcon]="currentUser?.profilePicture ? undefined : 'user'"
              class="border-2"
              [style.background]="
                'linear-gradient(135deg, ' +
                themeService.colors().primary +
                ', ' +
                themeService.colors().accent +
                ')'
              "
            ></nz-avatar>

            <!-- Username -->
            <span
              class="text-sm font-medium"
              [ngClass]="isDarkMode ? 'text-gray-200' : 'text-gray-700'"
            >
              {{ currentUser?.username || "User" }}
            </span>

            <!-- Dropdown Icon -->
            <span
              nz-icon
              nzType="down"
              class="text-xs"
              [ngClass]="isDarkMode ? 'text-gray-400' : 'text-gray-500'"
            ></span>
          </button>
        </div>

        <!-- Dropdown Menu -->
        <nz-dropdown-menu #userMenu="nzDropdownMenu">
          <ul
            nz-menu
            class="rounded-2xl overflow-hidden shadow-2xl border backdrop-blur-xl min-w-[260px] py-3 theme-transition"
            [ngClass]="
              isDarkMode
                ? 'bg-gray-800/95 border-gray-600/30 shadow-amber-500/10'
                : 'bg-white/95 border-gray-200/30 shadow-amber-500/5'
            "
          >
            <!-- User Info Header with Gradient -->
            <li
              nz-menu-item
              [nzDisabled]="true"
              class="!px-6 !py-4 relative overflow-hidden"
            >
              <!-- Background gradient -->
              <div
                class="absolute inset-0 bg-gradient-to-br from-amber-500/5 via-orange-500/3 to-amber-500/5"
              ></div>

              <div class="flex items-center space-x-4 relative z-10">
                <!-- Avatar with glow -->
                <div class="relative">
                  <nz-avatar
                    [nzSize]="48"
                    [nzSrc]="currentUser?.profilePicture || undefined"
                    [nzIcon]="currentUser?.profilePicture ? undefined : 'user'"
                    class="border-2 shadow-lg"
                    [ngClass]="
                      isDarkMode
                        ? 'border-amber-500/60 shadow-amber-500/20'
                        : 'border-amber-400/60 shadow-amber-400/20'
                    "
                  ></nz-avatar>
                  <!-- Premium crown for admin -->
                  <div
                    *ngIf="isAdmin()"
                    class="absolute -top-2 -right-2 w-5 h-5 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg"
                  >
                    <span
                      nz-icon
                      nzType="crown"
                      class="text-white text-xs"
                    ></span>
                  </div>
                </div>

                <div class="flex-1 min-w-0">
                  <div
                    class="text-base font-bold truncate mb-1"
                    [ngClass]="isDarkMode ? 'text-amber-300' : 'text-amber-700'"
                  >
                    {{ currentUser?.username }}
                  </div>
                  <div
                    class="text-sm truncate theme-transition"
                    [ngClass]="
                      isDarkMode ? 'text-amber-400/80' : 'text-amber-600/80'
                    "
                  >
                    {{ currentUser?.email }}
                  </div>
                  <div class="flex items-center gap-2 mt-2">
                    <div
                      class="px-2 py-1 rounded-full text-xs font-semibold theme-transition"
                      [ngClass]="
                        isDarkMode
                          ? 'bg-amber-500/20 text-amber-300'
                          : 'bg-amber-500/15 text-amber-700'
                      "
                    >
                      {{ currentUser?.role || "User" }}
                    </div>
                    <div
                      class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"
                    ></div>
                  </div>
                </div>
              </div>
            </li>

            <!-- Divider with gradient -->
            <li nz-menu-divider class="!my-3 relative">
              <div
                class="absolute inset-0 bg-gradient-to-r from-transparent via-amber-500/20 to-transparent"
              ></div>
            </li>

            <!-- Menu Items -->
            <ng-container
              *ngFor="
                let item of [
                  {
                    icon: 'dashboard',
                    label: 'My Kitchen',
                    color: 'amber',
                    route: '/dashboard'
                  },
                  {
                    icon: 'user',
                    label: 'My Profile',
                    color: 'blue',
                    route: '/profile'
                  },
                  {
                    icon: 'setting',
                    label: 'Settings',
                    color: 'purple',
                    route: '/settings'
                  },
                  {
                    icon: 'crown',
                    label: 'Admin Panel',
                    color: 'gold',
                    route: '/admin'
                  }
                ]
              "
            >
              <li
                *ngIf="item.label !== 'Admin Panel' || isAdmin()"
                nz-menu-item
                [routerLink]="item.route"
                class="!px-6 !py-4 theme-transition group relative overflow-hidden"
                [ngClass]="
                  isDarkMode ? 'hover:bg-gray-700/50' : 'hover:bg-gray-100/60'
                "
              >
                <!-- Hover background effect -->
                <div
                  class="absolute inset-0 bg-gradient-to-r from-amber-500/0 via-amber-500/5 to-amber-500/0 opacity-0 group-hover:opacity-100 theme-transition"
                ></div>

                <!-- Icon with color coding -->
                <span
                  nz-icon
                  [nzType]="item.icon"
                  class="mr-4 text-lg theme-transition transform group-hover:scale-125 group-hover:rotate-12"
                  [ngClass]="{
                    'text-amber-500': item.color === 'amber',
                    'text-blue-500': item.color === 'blue',
                    'text-purple-500': item.color === 'purple',
                    'text-yellow-500': item.color === 'gold'
                  }"
                ></span>

                <!-- Label with hover effect -->
                <span
                  class="font-semibold theme-transition transform group-hover:translate-x-2"
                  [ngClass]="
                    isDarkMode
                      ? 'text-gray-200 group-hover:text-amber-300'
                      : 'text-gray-700 group-hover:text-amber-700'
                  "
                >
                  {{ item.label }}
                </span>

                <!-- Arrow indicator -->
                <span
                  nz-icon
                  nzType="right"
                  class="ml-auto text-xs opacity-0 group-hover:opacity-100 theme-transition transform -translate-x-2 group-hover:translate-x-0"
                  [ngClass]="isDarkMode ? 'text-amber-400' : 'text-amber-500'"
                ></span>
              </li>
            </ng-container>

            <!-- Divider -->
            <li
              nz-menu-divider
              class="!my-3"
              [ngClass]="isDarkMode ? '!bg-gray-700/50' : '!bg-gray-200/50'"
            ></li>

            <!-- Logout with dramatic hover effect -->
            <li
              nz-menu-item
              (click)="logout()"
              class="!px-6 !py-4 theme-transition group relative overflow-hidden"
              [ngClass]="
                isDarkMode ? 'hover:bg-red-500/20' : 'hover:bg-red-500/10'
              "
            >
              <!-- Animated background -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 opacity-0 group-hover:opacity-100 theme-transition"
              ></div>

              <!-- Icon with dramatic animation -->
              <span
                nz-icon
                nzType="logout"
                class="mr-4 text-lg theme-transition transform group-hover:scale-125 group-hover:-rotate-45 group-hover:translate-x-1"
                [ngClass]="
                  isDarkMode
                    ? 'text-red-400 group-hover:text-red-300'
                    : 'text-red-500 group-hover:text-red-600'
                "
              ></span>

              <!-- Text with glow -->
              <span
                class="font-semibold theme-transition transform group-hover:translate-x-2"
                [ngClass]="
                  isDarkMode
                    ? 'text-red-400 group-hover:text-red-300'
                    : 'text-red-500 group-hover:text-red-600'
                "
              >
                Sign Out
              </span>

              <!-- Pulse effect -->
              <div
                class="absolute inset-0 border-2 border-red-500/0 rounded-xl group-hover:border-red-500/30 theme-transition group-hover:animate-pulse"
              ></div>
            </li>
          </ul>
        </nz-dropdown-menu>
        }

        <!-- Mobile Menu Button -->
        <button
          nz-button
          nzType="text"
          nzShape="circle"
          [nzSize]="'large'"
          class="md:hidden theme-transition"
          [ngClass]="
            isDarkMode ? 'hover:bg-gray-800/40' : 'hover:bg-gray-100/60'
          "
        >
          <span
            nz-icon
            nzType="menu"
            nzTheme="outline"
            class="text-lg"
            [style.color]="isDarkMode ? '#F5F1E8' : '#2D2D2D'"
          ></span>
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Spacer for fixed navbar -->
<div class="h-16"></div>
